service: seek-job-add-checkout-backend

frameworkVersion: '2'

provider:
  name: aws
  runtime: nodejs14.x
  profile: serverless-admin
  lambdaHashingVersion: 20201221
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamo:PutItem
      Resource:
        Fn::GetAtt: [DiscountTable, Arn]


functions:
  createAd:
    handler: lambdas/ad.createAd
    events:
      - http:
          path: ad
          method: POST
          cors: true
    environment:
      AD_TABLE: { Ref: DiscountTable }


resources:
  Resources:
    DiscountTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: discountTable
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH
        ProvisionedThroughput:
          ReadCapacityUnits: 1
          WriteCapacityUnits: 1
        BillingMode: PAY_PER_REQUEST
    AdTable:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: adTable
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH
        ProvisionedThroughput:
          ReadCapacityUnits: 1
          WriteCapacityUnits: 1
        BillingMode: PAY_PER_REQUEST    